#N canvas 940 266 522 487 12;
#X declare -path lib;
#X obj 113 257 r \$0-midi;
#X obj 113 167 r \$0-pat;
#X obj 110 98 tgl 15 0 empty \$0-metro empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 110 122 metro 500;
#X obj 110 151 bng 15 50 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X floatatom 212 103 5 0 0 0 - - -, f 5;
#X obj 110 333 algojuggle;
#X msg 10 343 reset;
#X msg 178 157 5 3 4;
#X floatatom 110 362 5 0 0 0 - - -, f 5;
#X floatatom 161 362 5 0 0 0 - - -, f 5;
#X text 270 157 siteswap pattern;
#X msg 177 227 80 120 35 42 47 48, f 10;
#X text 270 207 MIDI preset: minvel \, maxvel \, followed by MIDI notes
to be assigned to each object, f 24;
#X listbox 240 363 8 0 0 0 - - -, f 8;
#X obj 110 457 noteout 10;
#X text 272 103 metronome tick in msec;
#X floatatom 240 433 5 0 0 0 - - -, f 5;
#X text 310 433 MIDI output channel;
#X obj 110 390 makenote 64 500;
#X listbox 178 187 15 0 0 0 - - #0-cmd, f 15;
#X listbox 177 277 25 0 0 0 - - #0-setup, f 25;
#X msg 240 403 1;
#X msg 280 403 10;
#X floatatom 212 40 5 0 0 0 - - -, f 5;
#X obj 212 68 expr 60000/$f1;
#X text 270 40 tempo (bpm);
#X msg 191 10 120;
#X msg 231 10 240;
#X msg 271 10 480;
#X msg 151 10 90;
#X text 10 210 site swap;
#X msg 10 240 swap 1 2;
#X msg 10 300 swap 1 3;
#X text 310 363 current beat;
#X msg 10 270 swap 2 3;
#X obj 426 10 tgl 15 0 empty \$0-loop loop 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#N canvas 734 206 450 345 qlist 0;
#X obj 20 123 qlist;
#X obj 53 180 spigot;
#X obj 52 152 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X msg 20 220 rewind \, bang;
#X obj 20 20 inlet;
#X obj 92 20 inlet;
#X obj 140 20 loadbang;
#X obj 140 220 r #;
#X text 140 180 dummy receiver for comments, f 16;
#X obj 52 260 outlet;
#X obj 20 49 == 0;
#X obj 20 78 sel 0 1;
#X msg 140 110 rewind \; metro 0;
#X obj 270 60 == 0;
#X obj 240 90 spigot 1;
#X msg 240 119 set 0;
#X msg 140 70 read seq1.txt;
#X obj 320 79 sprintf seq%d.txt;
#X msg 320 140 read \$1;
#X obj 320 108 symbol;
#X obj 320 20 inlet;
#X obj 320 49 + 1;
#X obj 190 220 r bpm;
#X obj 190 249 s \$0-bpm;
#X obj 260 220 r pat;
#X obj 260 249 s \$0-pat;
#X obj 330 220 r midi;
#X obj 330 249 s \$0-midi;
#X obj 260 280 r cmd;
#X obj 260 309 s \$0-cmd;
#X obj 330 280 r metro;
#X obj 330 309 s \$0-metro;
#X obj 190 280 r mute;
#X obj 190 310 s \$0-mute;
#X obj 240 148 s \$0-seq;
#X connect 0 1 2 0;
#X connect 0 1 9 0;
#X connect 1 0 3 0;
#X connect 2 0 1 0;
#X connect 2 0 14 0;
#X connect 3 0 0 0;
#X connect 4 0 10 0;
#X connect 5 0 1 1;
#X connect 5 0 13 0;
#X connect 6 0 16 0;
#X connect 10 0 11 0;
#X connect 11 0 0 0;
#X connect 11 1 12 0;
#X connect 12 0 0 0;
#X connect 13 0 14 1;
#X connect 14 0 15 0;
#X connect 15 0 34 0;
#X connect 16 0 0 0;
#X connect 17 0 19 0;
#X connect 18 0 0 0;
#X connect 19 0 18 0;
#X connect 20 0 21 0;
#X connect 21 0 17 0;
#X connect 22 0 23 0;
#X connect 24 0 25 0;
#X connect 26 0 27 0;
#X connect 28 0 29 0;
#X connect 30 0 31 0;
#X connect 32 0 33 0;
#X restore 400 34 pd qlist;
#X obj 400 63 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000;
#X obj 400 10 tgl 15 0 empty \$0-seq empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#N canvas 747 383 450 300 cmd 0;
#X obj 20 20 inlet;
#X obj 20 99 s \$0-metro;
#X obj 99 99 s \$0-bpm;
#X obj 239 99 s \$0-pat;
#X obj 304 99 s \$0-cmd;
#X obj 20 70 route metro bpm mute list;
#X obj 165 99 s \$0-mute;
#X obj 20 130 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 20 154 s all-metro;
#X connect 0 0 5 0;
#X connect 5 0 1 0;
#X connect 5 0 7 0;
#X connect 5 1 2 0;
#X connect 5 2 6 0;
#X connect 5 3 3 0;
#X connect 5 4 4 0;
#X connect 7 0 8 0;
#X restore 10 388 pd cmd;
#N canvas 889 364 800 393 midi 0;
#X obj 20 20 notein;
#X obj 20 340 outlet;
#X obj 400 319 != 0;
#X msg 400 348 metro \$1;
#X obj 160 300 unpack f f f;
#X obj 20 160 expr if($f2>0 \, ($f1-36)%16+84 \, $f1), f 17;
#X obj 160 109 != 0;
#X text 160 180 B = cycle through tempos;
#X text 400 260 play = toggle metro;
#X msg 160 270 94 \$1 10;
#X obj 160 239 t f f;
#X obj 400 109 f 80;
#X obj 490 109 f 120;
#X obj 400 180 pack f f;
#X obj 490 138 t b f;
#X msg 400 209 prefix \$1 \$2;
#X text 400 50 faders = minvel \, maxvel;
#X text 160 50 A = temporarily switch to bank 4;
#X obj 43 281 s \$0-midi;
#X obj 66 304 s \$0-chan;
#X floatatom 600 109 5 0 0 0 - - -, f 5;
#X floatatom 600 196 5 0 0 0 - - -, f 5;
#X obj 600 224 s \$0-bpm;
#X obj 600 137 expr int($f1/128*480);
#X obj 600 166 max 30;
#X text 600 50 K1 = bpm;
#X obj 600 319 != 0;
#X text 600 260 rec = toggle clock;
#X obj 600 348 s \$0-clock;
#X obj 69 140 r \$0-shift;
#X obj 160 138 s \$0-shift;
#X obj 160 80 r \$0-A;
#X obj 160 210 r \$0-B;
#X obj 400 80 r \$0-F1;
#X obj 490 80 r \$0-F2;
#X obj 600 80 r \$0-K1;
#X obj 400 290 r \$0-play;
#X obj 600 290 r \$0-rec;
#X text 160 20 MIDI controller support;
#N canvas 267 403 450 300 Donner 0;
#X text 20 20 Donner Starrypad support;
#X obj 20 60 ctlin 26 1;
#X obj 20 89 s \$0-A;
#X obj 120 60 ctlin 27 1;
#X obj 120 89 s \$0-B;
#X obj 20 130 ctlin 20 1;
#X obj 120 130 ctlin 21 1;
#X obj 230 130 ctlin 28 1;
#X obj 20 159 s \$0-F1;
#X obj 120 159 s \$0-F2;
#X obj 230 159 s \$0-K1;
#X obj 20 200 ctlin 60 1;
#X obj 120 200 ctlin 62 1;
#X obj 20 229 s \$0-play;
#X obj 120 229 s \$0-rec;
#X connect 1 0 2 0;
#X connect 3 0 4 0;
#X connect 5 0 8 0;
#X connect 6 0 9 0;
#X connect 7 0 10 0;
#X connect 11 0 13 0;
#X connect 12 0 14 0;
#X restore 400 20 pd Donner;
#N canvas 270 403 450 308 LKMini 0;
#X obj 20 89 s \$0-A;
#X obj 120 89 s \$0-B;
#X obj 20 159 s \$0-F1;
#X obj 120 159 s \$0-F2;
#X obj 230 159 s \$0-K1;
#X obj 20 259 s \$0-play;
#X obj 120 259 s \$0-rec;
#X text 20 20 LaunchKey Mini support;
#X obj 20 130 ctlin 2 1;
#X obj 120 130 ctlin 3 1;
#X obj 230 130 ctlin 4 1;
#X obj 20 201 ctlin 115 16;
#X obj 120 200 ctlin 117 16;
#N canvas 736 383 450 300 tgl 0;
#X obj 20 120 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 127;
#X obj 20 60 > 0;
#X obj 20 89 sel 1;
#X obj 20 20 inlet;
#X obj 20 150 outlet;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X restore 20 230 pd tgl;
#N canvas 736 383 450 300 tgl 0;
#X obj 20 120 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 127;
#X obj 20 60 > 0;
#X obj 20 89 sel 1;
#X obj 20 20 inlet;
#X obj 20 150 outlet;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X restore 120 229 pd tgl;
#X connect 8 0 2 0;
#X connect 9 0 3 0;
#X connect 10 0 4 0;
#X connect 11 0 13 0;
#X connect 12 0 14 0;
#X connect 13 0 5 0;
#X connect 14 0 6 0;
#X restore 500 20 pd LKMini;
#N canvas 277 415 450 300 Beatstep 0;
#X obj 20 89 s \$0-A;
#X obj 120 89 s \$0-B;
#X obj 20 159 s \$0-F1;
#X obj 120 159 s \$0-F2;
#X obj 230 159 s \$0-K1;
#X text 20 20 Beatstep Pro support;
#X obj 20 259 s \$0-play;
#X obj 120 259 s \$0-rec;
#N canvas 736 383 450 300 tgl 0;
#X obj 20 120 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 127;
#X obj 20 60 > 0;
#X obj 20 89 sel 1;
#X obj 20 20 inlet;
#X obj 20 150 outlet;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X restore 20 230 pd tgl;
#N canvas 736 383 450 300 tgl 0;
#X obj 20 120 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 127;
#X obj 20 60 > 0;
#X obj 20 89 sel 1;
#X obj 20 20 inlet;
#X obj 20 150 outlet;
#X connect 0 0 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X restore 120 229 pd tgl;
#X obj 20 60 ctlin 20 10;
#X obj 120 60 ctlin 21 10;
#X obj 20 130 ctlin 74 10;
#X obj 120 130 ctlin 71 10;
#X obj 230 130 ctlin 76 10;
#X obj 20 201 ctlin 22 10;
#X obj 120 200 ctlin 23 10;
#X text 210 20 IMPORTANT: These bindings only work with control mode
switched to MIDI channel 10 -- assumes standard mapping of the encoders
and the step buttons \, so scene mode has to be disabled., f 32;
#X obj 230 200 ctlin 9 10;
#X msg 230 229 loop \$1;
#X obj 230 258 s \$0-cmd;
#X connect 8 0 6 0;
#X connect 9 0 7 0;
#X connect 10 0 0 0;
#X connect 11 0 1 0;
#X connect 12 0 2 0;
#X connect 13 0 3 0;
#X connect 14 0 4 0;
#X connect 15 0 8 0;
#X connect 16 0 9 0;
#X connect 18 0 19 0;
#X connect 19 0 20 0;
#X restore 600 20 pd Beatstep;
#X obj 520 180 loadbang;
#X msg 520 209 120;
#X obj 20 80 r all-notes;
#X obj 20 109 unpack f f 1;
#N canvas 736 383 450 300 note-filter 0;
#X obj 20 20 inlet;
#X obj 70 20 inlet;
#X obj 120 20 inlet;
#X obj 20 130 spigot;
#X obj 120 49 t f f;
#X obj 152 80 != 9;
#X obj 20 80 pack f f f;
#X obj 20 159 unpack f f f;
#X obj 20 188 outlet;
#X obj 80 188 outlet;
#X obj 140 188 outlet;
#X connect 0 0 6 0;
#X connect 1 0 6 1;
#X connect 2 0 4 0;
#X connect 3 0 7 0;
#X connect 4 0 6 2;
#X connect 4 1 5 0;
#X connect 5 0 3 1;
#X connect 6 0 3 0;
#X connect 7 0 8 0;
#X connect 7 1 9 0;
#X connect 7 2 10 0;
#X restore 20 50 pd note-filter;
#X obj 20 250 midiset \$1 \$2;
#X obj 20 220 r all-midiset;
#X connect 0 0 46 0;
#X connect 0 1 46 1;
#X connect 0 2 46 2;
#X connect 2 0 3 0;
#X connect 3 0 1 0;
#X connect 4 0 47 0;
#X connect 4 1 47 1;
#X connect 4 2 47 2;
#X connect 5 0 47 0;
#X connect 6 0 30 0;
#X connect 9 0 4 0;
#X connect 10 0 9 0;
#X connect 10 1 6 0;
#X connect 11 0 13 0;
#X connect 12 0 14 0;
#X connect 13 0 15 0;
#X connect 14 0 11 0;
#X connect 14 1 13 1;
#X connect 15 0 47 0;
#X connect 20 0 23 0;
#X connect 21 0 22 0;
#X connect 23 0 24 0;
#X connect 24 0 21 0;
#X connect 26 0 28 0;
#X connect 29 0 5 1;
#X connect 31 0 6 0;
#X connect 32 0 10 0;
#X connect 33 0 11 0;
#X connect 34 0 12 0;
#X connect 35 0 20 0;
#X connect 36 0 2 0;
#X connect 37 0 26 0;
#X connect 42 0 43 0;
#X connect 43 0 13 1;
#X connect 44 0 45 0;
#X connect 45 0 47 0;
#X connect 45 1 47 1;
#X connect 45 2 47 2;
#X connect 46 0 5 0;
#X connect 46 1 47 1;
#X connect 46 2 47 2;
#X connect 47 0 1 0;
#X connect 47 1 18 0;
#X connect 47 2 19 0;
#X connect 48 0 47 0;
#X restore 10 170 pd midi;
#X obj 480 10 hradio 15 0 0 2 empty empty empty 0 -8 0 10 #fcfcfc #000000
#000000 0;
#N canvas 109 372 450 428 time 0;
#X obj 40 200 midiclock;
#X floatatom 40 160 5 0 0 0 - - -, f 5;
#X floatatom 90 160 5 0 0 0 - - -, f 5;
#X obj 140 163 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 180 305 bng 15 50 50 0 empty empty pulse 17 7 0 10 #fcfcfc #000000
#000000;
#X floatatom 60 250 5 0 0 0 ms - -, f 5;
#X obj 40 306 tgl 15 0 empty empty status 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X floatatom 120 250 5 0 0 0 spp - -, f 5;
#X obj 40 20 loadbang;
#X obj 40 118 unpack f f;
#X msg 40 49 4 4;
#X msg 40 78 \$2 \$1;
#X text 90 50 meter n/m - m determines the base pulse \, n and m the
quantization of the SPP, f 29;
#X obj 180 329 outlet;
#X obj 40 330 outlet;
#X obj 140 120 inlet enable;
#X obj 270 120 inlet bpm;
#X floatatom 270 178 5 0 0 0 - - -, f 5;
#X msg 270 206 \$1 \$1;
#X text 240 240 translate a bpm value to the corresponding base pulse
and turn this into a meter specification, f 24;
#X text 160 150 enable MIDI clock sync, f 11;
#X text 130 200 TODO: SPP is currently unused, f 16;
#X obj 120 328 outlet;
#X msg 120 278 pos \$1;
#X text 40 360 outlets: status indicates whether MIDI clocks are running
\, spp sets the playback position \, pulse outputs the base pulse,
f 51;
#X obj 340 20 loadbang;
#X msg 340 49 120;
#X floatatom 340 78 5 0 0 0 - - -, f 5;
#X obj 270 149 expr $f1/$f2*4;
#X connect 0 0 4 0;
#X connect 0 1 5 0;
#X connect 0 2 6 0;
#X connect 0 3 7 0;
#X connect 1 0 0 0;
#X connect 2 0 0 1;
#X connect 3 0 0 2;
#X connect 4 0 13 0;
#X connect 6 0 14 0;
#X connect 7 0 23 0;
#X connect 8 0 10 0;
#X connect 9 0 1 0;
#X connect 9 1 2 0;
#X connect 10 0 11 0;
#X connect 11 0 9 0;
#X connect 15 0 3 0;
#X connect 16 0 28 0;
#X connect 17 0 18 0;
#X connect 18 0 9 0;
#X connect 23 0 22 0;
#X connect 25 0 26 0;
#X connect 26 0 27 0;
#X connect 27 0 28 1;
#X connect 28 0 17 0;
#X restore 10 80 pd time;
#X obj 10 60 tgl 15 0 empty \$0-clock empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 10 105 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#X obj 10 129 sel 0;
#X text 10 30 MIDI clock sync;
#X text 90 70 internal clock;
#X obj 311 10 r \$0-bpm;
#X obj 110 303 r \$0-cmd;
#X obj 177 303 r \$0-setup;
#X obj 320 403 r \$0-chan;
#X obj 33 104 s \$0-cmd;
#X obj 180 420 tgl 15 0 empty \$0-mute mute 17 7 0 10 #fcfcfc #000000
#000000 0 1;
#N canvas 463 366 450 300 mute 0;
#X obj 20 120 spigot 1;
#X obj 20 20 inlet;
#X obj 73 20 inlet;
#X obj 20 270 outlet;
#X obj 73 49 == 0;
#X obj 70 180 f -1;
#X text 120 180 last note;
#X obj 20 149 t f f;
#X msg 70 238 \$1 0;
#X text 120 240 mute last note - just in case;
#X obj 73 78 t f f;
#X obj 105 120 sel 0;
#X obj 70 209 moses 0;
#X connect 0 0 7 0;
#X connect 1 0 0 0;
#X connect 2 0 4 0;
#X connect 4 0 10 0;
#X connect 5 0 12 0;
#X connect 7 0 3 0;
#X connect 7 1 5 1;
#X connect 8 0 3 0;
#X connect 10 0 0 1;
#X connect 10 1 11 0;
#X connect 11 0 5 0;
#X connect 12 1 8 0;
#X restore 110 420 pd mute;
#X obj 350 320 declare -path lib;
#X connect 0 0 21 0;
#X connect 1 0 20 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 6 0;
#X connect 5 0 3 1;
#X connect 5 0 19 2;
#X connect 6 0 9 0;
#X connect 6 1 10 0;
#X connect 6 2 14 0;
#X connect 6 3 20 0;
#X connect 7 0 40 0;
#X connect 8 0 20 0;
#X connect 9 0 19 0;
#X connect 10 0 19 1;
#X connect 12 0 21 0;
#X connect 17 0 15 2;
#X connect 19 0 55 0;
#X connect 19 1 15 1;
#X connect 22 0 17 0;
#X connect 23 0 17 0;
#X connect 24 0 25 0;
#X connect 24 0 43 1;
#X connect 25 0 5 0;
#X connect 27 0 24 0;
#X connect 28 0 24 0;
#X connect 29 0 24 0;
#X connect 30 0 24 0;
#X connect 32 0 40 0;
#X connect 33 0 40 0;
#X connect 35 0 40 0;
#X connect 36 0 37 1;
#X connect 37 0 38 0;
#X connect 39 0 37 0;
#X connect 41 0 40 0;
#X connect 42 0 37 2;
#X connect 43 0 45 0;
#X connect 43 1 53 0;
#X connect 43 2 4 0;
#X connect 44 0 43 0;
#X connect 45 0 46 0;
#X connect 46 0 7 0;
#X connect 49 0 24 0;
#X connect 50 0 6 0;
#X connect 51 0 6 1;
#X connect 52 0 17 0;
#X connect 54 0 55 1;
#X connect 55 0 15 0;
